// Stress test failure: Complex OR with one branch out of bounds

fn testComplexOrWithBadBranch() -> int {
  let arr: array[int] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
  let maybeX: result[int] = match readFile("examples/data/input.txt") {
    ok(content) => parseInt(content);
    error(reason) => error(reason);
  };

  let x = match maybeX {
    ok(value) => value;
    error(_) => 0;
  };

  // One branch is safe [0,4], but the other [15,19] is out of bounds
  if (x >= 0 and x < 5) or (x >= 15 and x < 20) {
    return arr[x];  // âŒ Should fail! x could be [15,19]
  }

  return -1;
}

fn main() -> void {
  print(string(testComplexOrWithBadBranch()));
}
